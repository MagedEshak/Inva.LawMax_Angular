<main>
    <section class="">
        <div class="p-3">
            <h3 class="h3 text-start">Cases</h3>

            <div class="d-flex justify-content-end gap-1">
                <a [routerLink]="['./add']" class="btn btn-sm text-white"
                    style="background: linear-gradient(to right, #007bff, #0056b3)" title="add">
                    <i class="fas fa-plus"></i> Add New Case
                </a>
            </div>
        </div>
    </section>

    <ngx-datatable class="" [rows]="cases" [columnMode]="'force'" [headerHeight]="50" [footerHeight]="50"
        [rowHeight]="50" [loadingIndicator]="isLoading" [limit]="10" style="border-radius: 8px; overflow: hidden;">
        <!-- Case Number -->
        <ngx-datatable-column name="Number" [width]="150">
            <ng-template let-row="row" ngx-datatable-cell-template>
                {{ row.caseDto?.number || '—' }}
            </ng-template>
        </ngx-datatable-column>

        <!-- Case Title -->
        <ngx-datatable-column name="Case Title" [width]="150">
            <ng-template let-row="row" ngx-datatable-cell-template>
                {{ formatDescription(row.caseDto?.caseTitle) }}
            </ng-template>
        </ngx-datatable-column>

        <!-- Description -->
        <ngx-datatable-column name="Description" [width]="200">
            <ng-template let-row="row" ngx-datatable-cell-template>
                {{ formatDescription(row.caseDto?.description) }}
            </ng-template>
        </ngx-datatable-column>

        <!-- Litigation Degree -->
        <ngx-datatable-column name="Litigation Degree" [width]="180">
            <ng-template let-row="row" ngx-datatable-cell-template>
                {{ row.caseDto?.litigationDegree || '—' }}
            </ng-template>
        </ngx-datatable-column>

        <!-- Final Verdict -->
        <ngx-datatable-column name="Final Verdict" [width]="200">
            <ng-template let-row="row" ngx-datatable-cell-template>
                {{ row.caseDto?.finalVerdict || '—' }}
            </ng-template>
        </ngx-datatable-column>
        <ngx-datatable-column name="Status" [width]="120">
            <ng-template let-row="row" ngx-datatable-cell-template>
                <span class="badge px-3 py-2" [ngClass]="getStatusClass(row.caseDto?.status)">
                    {{ getStatusLabel(row.caseDto?.status) }}
                </span>
            </ng-template>
        </ngx-datatable-column>


        <!-- Year -->
        <ngx-datatable-column name="Year" [width]="80">
            <ng-template let-row="row" ngx-datatable-cell-template>
                {{ row.caseDto?.year || '—' }}
            </ng-template>
        </ngx-datatable-column>

        <ngx-datatable-column name="Lawyer" [width]="180">
            <ng-template let-row="row" ngx-datatable-cell-template>
                {{ row.lawyerDto?.name || '—' }}
            </ng-template>
        </ngx-datatable-column>


        <!-- Actions -->
        <ngx-datatable-column name="Actions" [canAutoResize]="false" [sortable]="false" [draggable]="false">
            <ng-template let-row="row" ngx-datatable-cell-template>
                <div class="d-flex justify-content-start gap-1">
                    <a [routerLink]="['./details',row.caseDto?.id]" class="btn btn-sm btn-outline-secondary"
                        title="details">
                        <i class="fas fa-eye"></i>
                    </a>
                    <a [routerLink]="['./edit', row.caseDto?.id]" class="btn btn-sm btn-outline-warning" title="edit">
                        <i class="fas fa-edit"></i>
                    </a>
                    <button class="btn btn-sm btn-outline-danger" title="delete"
                        (click)="deleteHearing(row.caseDto?.id)">
                        <i class="fas fa-trash-alt"></i>
                    </button>
                </div>
            </ng-template>
        </ngx-datatable-column>
    </ngx-datatable>
</main>